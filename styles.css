/* =========================================================
EQUb App â€” Complete & Enhanced (All Issues Fixed)
========================================================= */

/* ---------- Root Variables ---------- */
@font-face {
  font-family: 'Benaiaha';
  src: url('Benaiah.ttf') format('truetype'),
       url('Benaiah.otf') format('opentype');
  font-weight: normal;
  font-style: normal;
  font-display: swap;
}

:root{
  --accent1: #06b6d4;
  --accent2: #ec4899;
  --accent3: #f97316;
  --accent4: #0f766e;
  --ok: #22c55e;
  --warn: #f59e0b;
  --error: #ef4444;
  --text-light: #ffffff;
  --text-dark: #1f2937;
  --bg-blur: rgba(255,255,255,0.08);
  --nav-height: 72px;
  --card-max: 420px;
  --transition: 0.28s ease;
  --glass-border: rgba(255,255,200,0.14);
  --emoji-size: 1.6em;
}

/* ---------- Global Reset ---------- */
*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%;scroll-behavior:smooth}
body{
  font-family:'Benaiaha', system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  color:var(--text-light);
  background: linear-gradient(135deg, #0f766e 0%, #d97706 100%);
  min-height:100vh;
  overflow-x:hidden;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
}

/* 1. FIXED: NO BOTTOM BLANK SPACE */
.app-container{
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 20px 15px calc(var(--nav-height) + 20px);
  position: relative;
  z-index: 1;
}

/* ---------- Particles ---------- */
#particles{
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 0;
  overflow: hidden;
}
.particle{
  position: absolute;
  border-radius: 50%;
  opacity: 0.7;
  background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.9), rgba(255,255,255,0.25));
  mix-blend-mode: overlay;
  filter: blur(0.8px) saturate(120%);
  transform: translate3d(0,0,0);
  animation: riseUp 12s linear infinite;
  z-index: 0;
}

@keyframes riseUp {
  0%   { transform: translateY(110vh) scale(.6); opacity:0 }
  10%  { opacity:.8 }
  60%  { opacity:.6 }
  100% { transform: translateY(-30vh) scale(1.2); opacity:0 }
}

/* ---------- Pages ---------- */
.page{
  width:100%;
  max-width:var(--card-max);
  margin:0 auto;
  text-align:center;
  display:none;
  animation: fadeIn .28s ease;
  position:relative;
  z-index:2;
}
.page.active{ display:block }

@keyframes fadeIn{ from{ opacity:0; transform:translateY(8px) } to{ opacity:1; transform:none } }

/* ---------- Glass Cards ---------- */
.glass-card{
  background: linear-gradient(180deg, rgba(255,255,255,0.04), rgba(255,255,255,0.02));
  backdrop-filter: blur(12px) saturate(120%);
  border-radius:20px;
  padding:20px;
  margin:15px auto;
  max-width:var(--card-max);
  width:100%;
  box-shadow: 0 6px 22px rgba(0,0,0,0.22);
  border: 1px solid var(--glass-border);
  transition: transform var(--transition), box-shadow var(--transition);
}
.glass-card:hover{ transform: translateY(-3px); box-shadow: 0 14px 40px rgba(0,0,0,0.26) }
.center-card{ max-width:350px }

/* ---------- Buttons ---------- */
.glass-button,
.gradient-button{
  border:none;
  border-radius:16px;
  padding:10px 18px;
  color:var(--text-light);
  font-weight:600;
  cursor:pointer;
  transition: all var(--transition);
  background: linear-gradient(90deg, var(--accent1), var(--accent2));
  box-shadow: 0 6px 16px rgba(0,0,0,0.25), 0 0 14px rgba(236,72,153,0.12) inset;
  text-align:center;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap:8px;
  min-height:44px;
}
.glass-button:hover,
.gradient-button:hover{
  transform: translateY(-2px);
  box-shadow: 0 16px 36px rgba(0,0,0,0.32);
}
.glass-button.secondary{
  background: rgba(255,255,255,0.06);
  color:var(--text-light);
  box-shadow:none;
  border: 1px solid rgba(255,255,255,0.06);
}
.glass-button.small{ padding:8px 12px; font-size:.92em; border-radius:12px }

/* 2. FIXED: BUTTON SPACING (My Equb & Members) */
.button-group,
.action-buttons,
.modal-buttons {
  display: flex;
  gap: 16px;
  justify-content: center;
  flex-wrap: wrap;
  margin-top: 18px;
}
.button-group button,
.action-buttons button,
.modal-buttons button {
  flex: 1;
  min-width: 120px;
}

/* FIXED: Action buttons in cards */
#equb-list .glass-card,
#member-list .glass-card {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

#equb-list .glass-card .button-row,
#member-list .glass-card .button-row {
  display: flex;
  gap: 10px;
  justify-content: center;
  margin-top: 8px;
}

#equb-list .glass-card .button-row button,
#member-list .glass-card .button-row button {
  flex: 1;
  min-width: 80px;
  padding: 8px 12px;
  font-size: 0.9em;
}

/* ---------- Form fields ---------- */
.form-field{
  width:100%;
  padding:12px;
  margin:8px 0;
  border:none;
  border-radius:12px;
  color:var(--text-light);
  background-color: rgba(255,255,255,0.08);
  font-size:1rem;
  outline:none;
  transition: background var(--transition), box-shadow var(--transition);
}
.form-field:focus{
  background: rgba(255,255,255,0.12);
  box-shadow: 0 4px 16px rgba(0,0,0,0.18) inset;
}
.form-field::placeholder{ 
  color: rgba(255,255,255,0.65);
  transition: opacity 0.3s ease;
}

/* 3. FIXED: STYLED <select> */
select.form-field{
  appearance: none;
  background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='white'%3e%3cpath d='M7 10l5 5 5-5z'/%3e%3c/svg%3e");
  background-repeat: no-repeat;
  background-position: right 12px center;
  background-size: 14px;
  padding-right: 40px;
  cursor: pointer;
}
select.form-field option{
  background: #1a1a2e;
  color: white;
  padding: 8px;
}

/* 5. FIXED: ADD MEMBER FORM LAYOUT */
.form-row {
  margin-bottom: 16px;
  text-align: left;
}
.form-row label {
  display: block;
  margin-bottom: 6px;
  font-weight: 500;
  color: var(--text-light);
}

/* ---------- Progress ring ---------- */
.progress-container{ 
  position:relative; 
  width:200px; 
  height:200px; 
  margin:28px auto;
}
.progress-ring circle{ fill:none; stroke-width:10 }
.progress-bg{ stroke: rgba(255,255,255,0.12) }
.progress-fg{ stroke: url(#progress-gradient); stroke-linecap:round; transform: rotate(-90deg); transform-origin:center; transition: stroke-dashoffset .6s ease }
.progress-center{
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-direction: column;
}
.progress-percent{
  font-size: 2.2em;
  font-weight: 700;
  color: var(--text-light);
}

/* ---------- Scrollable lists ---------- */
.scroll-list{
  max-height: calc(100vh - (var(--nav-height) + 180px));
  overflow-y:auto;
  padding-right:6px;
}
.scroll-list::-webkit-scrollbar{ width:6px }
.scroll-list::-webkit-scrollbar-thumb{ background: linear-gradient(to bottom, var(--accent1), var(--accent2)); border-radius:3px }

/* 7. FIXED: DRAG-AND-DROP PAYOUT ORDER */
.payout-order-list {
  max-height: 50vh;
  overflow-y: auto;
  padding: 8px 0;
}

.payout-order-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px;
  margin: 8px 0;
  background: rgba(255,255,255,0.08);
  border-radius: 12px;
  border: 1px solid rgba(255,255,255,0.1);
  cursor: move;
  user-select: none;
  transition: all 0.3s ease;
  position: relative;
}

.payout-order-item:hover {
  background: rgba(255,255,255,0.12);
  transform: translateY(-1px);
}

.payout-order-item.dragging {
  opacity: 0.8;
  background: rgba(255,255,255,0.15);
  transform: scale(1.02);
  box-shadow: 0 8px 25px rgba(0,0,0,0.2);
  z-index: 10;
}

.payout-order-item .drag-handle {
  color: rgba(255,255,255,0.6);
  cursor: grab;
  font-size: 1.2em;
  padding: 4px;
  border-radius: 4px;
  transition: all 0.2s ease;
}

.payout-order-item .drag-handle:hover {
  color: rgba(255,255,255,0.9);
  background: rgba(255,255,255,0.1);
}

.payout-order-item .drag-handle:active {
  cursor: grabbing;
}

.payout-order-item .order-number {
  min-width: 28px;
  font-weight: 700;
  color: var(--accent3);
  text-align: center;
}

.payout-order-item .member-name {
  flex: 1;
  font-weight: 500;
}

.payout-order-controls {
  display: flex;
  gap: 6px;
}

.payout-order-controls button {
  padding: 6px 10px;
  font-size: 0.8em;
  min-width: auto;
  background: rgba(255,255,255,0.1);
  border: 1px solid rgba(255,255,255,0.1);
}

.payout-order-controls button:hover {
  background: rgba(255,255,255,0.15);
  transform: translateY(-1px);
}

.payout-order-controls button:disabled {
  opacity: 0.4;
  cursor: not-allowed;
  transform: none;
}

/* Drop zone styling for drag and drop */
.payout-order-item.drop-zone {
  border: 2px dashed var(--accent1);
  background: rgba(6, 182, 212, 0.1);
}

/* ---------- Feed & history ---------- */
.feed, .history-feed{
  height: calc(100vh - (var(--nav-height) + 54px));
  overflow-y:auto;
  padding:10px;
  border-radius:20px;
  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  backdrop-filter: blur(8px);
  margin:0 auto;
  border:1px solid rgba(255,255,255,0.03);
}

/* ---------- Activity cards ---------- */
.glass-activity-card{
  display:flex;
  align-items:center;
  width:100%;
  margin:8px auto;
  padding:14px;
  border-radius:14px;
  background: rgba(255,255,255,0.04);
  backdrop-filter: blur(6px);
  border:1px solid rgba(255,255,255,0.03);
  transition: transform .18s ease, box-shadow .18s ease;
}
.glass-activity-card:hover{ transform: translateY(-2px); box-shadow: 0 10px 28px rgba(0,0,0,0.18) }

/* ---------- Nav bar ---------- */
.nav-bar{
  position:fixed;
  bottom:0;
  left:0;
  width:100%;
  height:var(--nav-height);
  background: rgba(0,0,0,0.46);
  backdrop-filter: blur(10px);
  display:flex;
  justify-content:space-around;
  align-items:center;
  border-top:1px solid rgba(255,255,255,0.06);
  z-index:120;
}
.nav-item{
  flex:1;
  text-align:center;
  color:var(--text-light);
  background:none;
  border:none;
  cursor:pointer;
  font-size:.92em;
  transition: color var(--transition);
  padding:6px 4px;
}
.nav-item.active{ color:#ffd700; font-weight:700 }
.nav-icon{
  font-family: 'Material Symbols Rounded';
  font-size:1.55em;
  display:block;
  margin-bottom:4px;
  line-height:1;
}
.nav-text{ display:block; font-size:.78em; opacity:.95 }

/* ---------- Modals ---------- */
.modal{
  position:fixed;
  inset:0;
  background: rgba(0,0,0,0.72);
  display:none;
  justify-content:center;
  align-items:center;
  z-index:1000;
}
.modal.active{ display:flex }
.modal-content{
  background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));
  backdrop-filter: blur(16px);
  border-radius:16px;
  padding:18px;
  width:92%;
  max-width:360px;
  animation: pop .26s ease;
  border:1px solid rgba(255,255,255,0.04);
  max-height: 90vh;
  overflow-y: auto;
}
.confirm-modal { text-align: center; }
.confirm-modal p { margin: 16px 0; font-size:300 1.1em; }
@keyframes pop{ from{ transform: scale(.96); opacity:0 } to{ transform:scale(1); opacity:1 } }

/* ---------- Misc ---------- */
.empty-state{ opacity:.78; margin:18px 0; font-style:italic }
.hidden{ display:none !important }
.info-section{ margin-top:18px; padding-top:14px; border-top:1px solid rgba(255,255,255,0.04) }

/* ---------- Toggle switch ---------- */
.toggle-switch{ position:relative; display:inline-block; width:44px; height:24px; margin-left:10px }
.toggle-switch input{ opacity:0; width:0; height:0 }
.slider{ position:absolute; cursor:pointer; inset:0; background:#ccc; border-radius:24px; transition:.36s }
.slider:before{ content:""; position:absolute; height:18px; width:18px; left:3px; bottom:3px; background:white; border-radius:50%; transition:.36s }
input:checked + .slider{ background: var(--accent3) }
input:checked + .slider:before{ transform: translateX(20px) }

/* ---------- Toasts ---------- */
#toast-container{
  position:fixed;
  top:20px;
  right:20px;
  z-index:2200;
  display:flex;
  flex-direction:column;
  gap:10px;
  max-width:320px;
}
.toast{
  background: rgba(0,0,0,0.82);
  color:#fff;
  padding:12px 16px;
  border-radius:12px;
  font-size:.95em;
  box-shadow:0 6px 18px rgba(0,0,0,0.28);
  display:flex;
  align-items:center;
  gap:10px;
  animation: slideIn .26s ease, fadeOut .28s ease 2.8s forwards;
  backdrop-filter: blur(6px);
}
.toast.success{ border-left:5px solid var(--ok) }
.toast.error{ border-left:5px solid var(--error) }
@keyframes slideIn{ from{ transform: translateX(14px); opacity:0 } to{ transform:none; opacity:1 } }
@keyframes fadeOut{ to{ opacity:0; transform: translateY(-20px) } }

/* ---------- Welcome ---------- */
.welcome-logo{
  width:120px; height:120px; object-fit:contain; margin:0 auto 18px;
  border-radius:50%; background:#fff; padding:10px; box-shadow:0 6px 22px rgba(255,255,255,0.12)
}

/* ---------- Responsive ---------- */
@media (max-width:600px){
  .progress-container{ width:150px; height:150px }
  .progress-ring{ width:150px; height:150px }
  .progress-percent{ font-size:1.8em }
  .glass-card{ padding:14px }
  .nav-icon{ font-size:1.4em }
  .feed, .history-feed{ padding:8px }
  .button-group, .action-buttons, .modal-buttons{ gap:12px }
  .payout-order-item {
    padding: 10px;
    gap: 8px;
  }
  .payout-order-controls {
    flex-direction: column;
    gap: 4px;
  }
}

/* Dark Mode & Language */
[data-theme="dark"]{
  --text-light: #f3f4f6;
  --glass-border: rgba(255,255,255,0.06);
  background: linear-gradient(135deg, #071a1a 0%, #4b2b01 100%);
}
[data-theme="dark"] .glass-card{ background: linear-gradient(180deg, rgba(0,0,0,0.36), rgba(255,255,255,0.02)) }
[data-theme="dark"] .modal-content{ background: linear-gradient(180deg, rgba(0,0,0,0.36), rgba(255,255,255,0.02)) }

/* 6. FIXED: Language Selector */
.lang-en, .lang-am{ 
  display: inline !important; 
  transition: opacity 0.3s ease;
}

body[data-lang="en"] .lang-am{ 
  display: none !important; 
  opacity: 0; 
  width: 0; 
  height: 0; 
  overflow: hidden;
  position: absolute;
}

body[data-lang="am"] .lang-en{ 
  display: none !important; 
  opacity: 0; 
  width: 0; 
  height: 0; 
  overflow: hidden;
  position: absolute;
}

/* Ensure proper language switching in form placeholders */
body[data-lang="en"] input.form-field::placeholder {
  content: attr(data-placeholder-en);
}

body[data-lang="am"] input.form-field::placeholder {
  content: attr(data-placeholder-am);
}

/* 4. FIXED: TODAY'S PAYMENT STATUS STYLING - VERTICAL LAYOUT */
.payments-vertical-list {
  display: flex;
  flex-direction: column;
  gap: 10px;
  margin-top: 12px;
}

.payment-status {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px 16px;
  margin: 0;
  border-radius: 10px;
  font-size: 0.95em;
  font-weight: 500;
  transition: all 0.3s ease;
}

.payment-status:hover {
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(0,0,0,0.15);
}

.payment-status.paid {
  background: rgb(3 160 61 / 28%);
  color: var(--ok);
  border: 1px solid rgba(34, 197, 94, 0.3);
}

.payment-status.not-paid {
  background: rgb(17 16 16 / 30%);
  color: var(--error);
  border: 1px solid rgba(239, 68, 68, 0.3);
}

.payment-status .member-name {
  font-weight: 600;
  flex: 1;
  text-align: left;
}

.payment-status .status-indicator {
  display: flex;
  align-items: center;
  gap: 8px;
  font-weight: 500;
  padding: 4px 8px;
  border-radius: 6px;
  background: rgba(255,255,255,0.1);
}

/* Apply same in Members tab */
#member-list .payment-status {
  margin: 8px 0 0 0;
  font-size: 0.9em;
}

/* 6. FIXED: EMOJI SIZE (NOT NAV ICONS) */
.emoji {
  font-size: var(--emoji-size);
  line-height: 1;
}

/* Ensure navigation icons are untouched */
.nav-icon {
  font-size: 1.55em !important;
}

/* Activity feed emojis */
.glass-activity-card .icon {
  font-size: var(--emoji-size);
  margin-right: 12px;
}

/* In-app confirmation dialog styling */
.confirmation-dialog {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: linear-gradient(180deg, rgba(255,255,255,0.08), rgba(255,255,255,0.04));
  backdrop-filter: blur(20px);
  border-radius: 16px;
  padding: 24px;
  max-width: 320px;
  width: 90%;
  z-index: 2000;
  border: 1px solid var(--glass-border);
  box-shadow: 0 20px 40px rgba(0,0,0,0.3);
  animation: pop 0.3s ease;
}

.confirmation-dialog h3 {
  margin-bottom: 16px;
  color: var(--text-light);
  text-align: center;
}

.confirmation-dialog p {
  margin-bottom: 24px;
  text-align: center;
  opacity: 0.9;
}

.confirmation-dialog .dialog-buttons {
  display: flex;
  gap: 12px;
  justify-content: center;
}

.confirmation-dialog .dialog-buttons button {
  flex: 1;
  min-width: 100px;
}

/* PDF Export Styling Enhancements */
.pdf-export {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}

.pdf-header {
  background: linear-gradient(135deg, var(--accent4), var(--accent3));
  color: white;
  padding: 20px;
  text-align: center;
  border-radius: 8px 8px 0 0;
}

.pdf-content {
  padding: 20px;
  background: white;
  color: #333;
}

.pdf-table {
  width: 100%;
  border-collapse: collapse;
  margin: 16px 0;
}

.pdf-table th {
  background: rgba(6, 182, 212, 0.1);
  color: var(--accent1);
  padding: 12px;
  text-align: left;
  border-bottom: 2px solid var(--accent1);
}

.pdf-table td {
  padding: 10px 12px;
  border-bottom: 1px solid #e0e0e0;
}

.pdf-table tr:hover {
  background: rgba(6, 182, 212, 0.05);
}

/* Form field auto-calculation styling */
.auto-calculation-notice {
  background: rgba(59, 130, 246, 0.1);
  border: 1px solid rgba(59, 130, 246, 0.3);
  border-radius: 8px;
  padding: 8px 12px;
  margin: 8px 0;
  font-size: 0.9em;
  color: #3b82f6;
  display: flex;
  align-items: center;
  gap: 8px;
}

.auto-calculation-notice::before {
  content: "ðŸ’¡";
  font-size: 1.1em;
}

/* Accessibility */
button:focus, .form-field:focus, .nav-item:focus, select:focus { 
  outline: 3px solid rgba(6,182,212,0.3); 
  outline-offset:3px 
}

/* Utility */
.sr-only{ 
  position:absolute; 
  left:-10000px; 
  top:auto; 
  width:1px; 
  height:1px; 
  overflow:hidden 
}

/* Loading states */
.loading {
  opacity: 0.7;
  pointer-events: none;
  position: relative;
}

.loading::after {
  content: "";
  position: absolute;
  top: 50%;
  left: 50%;
  width: 20px;
  height: 20px;
  margin: -10px 0 0 -10px;
  border: 2px solid rgba(255,255,255,0.3);
  border-top: 2px solid var(--accent1);
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}
